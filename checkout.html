<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Checkout</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="checkout.css">
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script type="module">
  import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.10.0/firebase-app.js';
  import { getAuth, onAuthStateChanged } from 'https://www.gstatic.com/firebasejs/10.10.0/firebase-auth.js';

  const firebaseConfig = {
    apiKey: "AIzaSyBaDBLoe2Wi2WgmJfPRXoEP-ZSgkVhMxVI",
    authDomain: "musicoul-15025.firebaseapp.com",
    projectId: "musicoul-15025",
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  // A flag to prevent multiple redirects
  let redirecting = false;

  onAuthStateChanged(auth, (user) => {
    if (!user && !redirecting) {
      redirecting = true;  // prevent multiple redirects
      localStorage.setItem('redirectAfterLogin', window.location.href);
      localStorage.setItem('showLoginMessage', 'true');
      window.location.href = '/index.html';
    }
  });
</script>
</head>
<body>
    <div class="checkout-container">
        <h1>Checkout</h1>
        <div class="order-summary">
            <h2>Order Summary</h2>
            <p>Item: <span id="item-name">Course Name Here</span></p>
            <p>Price: ₹<span id="item-price">XXX</span></p>
            <p>Total: ₹<span id="total-amount">XXX</span></p>
        </div>
        <button id="pay-now-button">Pay Now</button>
    </div>

    <script src="checkout.js"></script>
</body>
</html>